{% load static %}
<!doctype html>
<html lang="en">

  <head>
    <title>Picture Pets</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="csrf-token" content="{{ csrf_token }}">

    <style>
      html {
        scroll-behavior: smooth;
      }

      #drop-area {
        border: 2px dashed #ccc;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        background-color: #f9f9f9;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      #drop-area.dragover {
        border-color: #007bff;
        background-color: #e7f0ff;
      }

      #drop-area p {
        margin: 0;
        color: #555;
      }

      #upload-status {
        margin-top: 10px;
        color: #333;
      }

      #upload-status.error {
        color: #dc3545;
      }

      #upload-status.success {
        color: #28a745;
      }
    </style>

    <link href="https://fonts.googleapis.com/css?family=DM+Sans:300,400,700|Indie+Flower" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap-datepicker.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.fancybox.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/flaticon/font/flaticon.css' %}">
    <link rel="stylesheet" href="{% static 'css/aos.css' %}">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

  </head>


  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">

    <div class="site-wrap" id="home-section">

      <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
          <div class="site-mobile-menu-close mt-3">
            <span class="icon-close2 js-menu-toggle"></span>
          </div>
        </div>
        <div class="site-mobile-menu-body"></div>
      </div>



      <header class="site-navbar site-navbar-target" role="banner">

        <div class="container mb-3">
          <div class="d-flex align-items-center">
            <div class="site-logo mr-auto">
              <a href="index.html">Picture Pets<span class="text-primary">.</span></a>
            </div>

          </div>
        </div>


        <div class="container">
          <div class="menu-wrap d-flex align-items-center">
            <span class="d-inline-block d-lg-none"><a href="#" class="text-black site-menu-toggle js-menu-toggle py-5"><span class="icon-menu h3 text-black"></span></a></span>
              <nav class="site-navigation text-left mr-auto d-none d-lg-block" role="navigation">
                <ul class="site-menu main-menu js-clone-nav mr-auto ">
                  <li class="active"><a href="" class="nav-link">Home</a></li>
                  <li class="active"><a href="#about-section" class="nav-link">About</a></li>
                  <li class="active"><a href="#inner-working-section" class="nav-link">How it works</a></li>
                  <li class="active"><a href="#upload-section" class="nav-link">Upload</a></li>
                  <li><a href="gallery.html" class="nav-link">Gallery</a></li>
                  <li><a href="order.html" class="nav-link">Order</a></li>
                  <li class="active"><a href="#contact-section" class="nav-link">Contact</a></li>
                </ul>
              </nav>

            <div class="top-social ml-auto">
              <a href="https://github.com/jakepfrench/picturepets" target="_blank">
                <span class="fab fa-github"></span>
              </a>
              <a href="https://www.instagram.com/picturepetsgallery/" target="_blank">
                <span class="fab fa-instagram"></span>
              </a>
            </div>
          </div>
        </div>
      </header>

    <div class="ftco-blocks-cover-1">
       
      <div class="site-section-cover overlay">
        <div class="container">
          <div class="row align-items-center ">
            <div class="col-md-5 mt-5 pt-5">
              <span class="text-cursive h5 text-red">Welcome To Picture Pets</span>
              <h1 class="mb-3 font-weight-bold text-teal">Turn Your Photos Into Coloring Pages</h1>
              <p>Upload, Download, or Order Your Personalized Coloring Book</p>
              <p class="mt-5"><a href="#inner-working-section" class="btn btn-primary py-4 btn-custom-1">Learn More</a></p>
            </div>
            <div class="col-md-6 ml-auto align-self-end">
              <img src="{% static 'images/f4b83056-45d8-4c90-9864-f9b4d6bd74a2.png' %}" alt="Image" class="img-fluid">
            </div>
          </div>
        </div>
      </div>
    </div>



    <div id="about-section" class="site-section bg-light">
      <div class="container">
        <div class="row">
          <div class="col-md-6 mb-5 mb-md-0 position-relative">
            <img src="{% static 'images/oreo1.png' %}"
                 alt="Image"
                 class="img-fluid"
                 onmouseover="this.src='{% static 'images/oreo2.png' %}'"
                 onmouseout="this.src='{% static 'images/oreo1.png' %}'">
          </div>
          <div class="col-md-5 ml-auto pl-md-5">
            <span class="text-cursive h5 text-red">About Us</span>
            <h3 class="text-black">Bring Fun Life To Your Kids</h3>
            <p><span>Turn your favorite memories into art.</span>
               <span> Inspired by a peaceful dog walk through the rolling hills of the Cotswolds, these custom coloring pages let you relive the moment</span></p>
               <p class="mt-5"><a href="#home-section" class="btn btn-primary py-4 btn-custom-1">Home</a></p>
          </div>
        </div>
      </div>
    </div>


    <div id="inner-working-section" class="site-section bg-light">
      <div class="container">
        <div class="row">
          <div class="vcard-wrap mr-5">
            <img src="{% static 'images/inner-working.gif' %}" alt="Image" class="vcard img-fluid">
          </div>
          <div class="col-md-5 ml-auto pl-md-5">
            <span class="text-cursive h5 text-red">How it works</span>
            <h3 class="text-black">Using AI to generate colouring pages</h3>
            <p><span>After you upload your favorite images, the AI jumps in to create a super fun coloring page based on that picture!</span>
               <span> It works like magic: the AI uses its special "seeing" powers to spot all the cool shapes and lines, turning them into a fun line drawing with a friendly twist. Then, it adds extra details and makes sure the lines are just right for coloring, all while keeping the pictureâ€™s fun style!.</span></p>
               <p class="mt-5"><a href="#home-section" class="btn btn-primary py-4 btn-custom-1">Home</a></p>
          </div>
        </div>
      </div>
    </div>


    <div id="upload-section" class="site-section bg-light">
      <div class="container">
        <div class="row">
          <div class="vcard-wrap mr-5">
            <img src="{% static 'images/upload.gif' %}" alt="Image" class="vcard img-fluid">
          </div>
          <div class="col-md-5 ml-auto pl-md-5">
            <span class="text-cursive h5 text-red">Upload</span>
            <h3 class="text-black">Upload images here</h3>
            <div id="drop-area" tabindex="0">
              <p>Drop images here or click to select</p>
              <input type="file" id="file-input" accept="image/*" multiple style="display: none;">
            </div>
            <div id="upload-status"></div>
            <p class="mt-5"><a href="#home-section" class="btn btn-primary py-4 btn-custom-1">Home</a></p>
          </div>
        </div>
      </div>
    </div>


    <div id="contact-section" class="site-section bg-light">
      <div class="container">
        <div class="row">
          <div class="vcard-wrap mr-5">
            <img src="{% static 'images/letter_small.png' %}" alt="Image" class="vcard img-fluid">
          </div>

          <div class="col-md-5 ml-auto pl-md-5">
            <span class="text-cursive h5 text-red">Contact</span>
            <h3 class="text-black">Why not drop us a line</h3>
            <p><span>We welcome suggestions (if you'd like a response, include your email)</span></p>

            <form method="post" id="contactForm" >
              <textarea class="form-control" id="messageInput" rows="3" placeholder="Type your message here..."></textarea>
              <button type="submit" class="btn btn-primary btn-custom-1 mt-3">Send Message</button>
            </form>

            <p class="mt-5">
              <a href="#home-section" class="btn btn-primary py-4 btn-custom-1">Home</a>
            </p>
          </div>
        </div>
      </div>
    </div>


    <div class="site-section py-5 bg-warning">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-12 d-flex">
          <h2 class="text-white m-0">Fun colouring pages for kids</h2>
          <a href="#" class="btn btn-primary btn-custom-1 py-3 px-5 ml-auto">Get Started</a>
          </div>
        </div>
      </div>
    </div>

      <script>
        function getCSRFToken() { return document.querySelector('meta[name="csrf-token"]').getAttribute('content'); }

        document.getElementById('contactForm').addEventListener('submit', function (e) {
          e.preventDefault();
          const message = document.getElementById('messageInput').value;

          fetch('/', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': getCSRFToken()
            },
            body: JSON.stringify({ message: message })
          })
          .then(response => {
            if (response.ok) {
              alert('Message sent successfully!');
              document.getElementById('messageInput').value = '';
            } else {
              alert('Failed to send message.');
            }
          })
          .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while sending your message.');
          });
        });


          document.addEventListener('DOMContentLoaded', function () {
          const dropArea = document.getElementById('drop-area');
          const fileInput = document.getElementById('file-input');
          const uploadStatus = document.getElementById('upload-status');

          function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
              const cookies = document.cookie.split(';');
              for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.startsWith(name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
                }
              }
            }
            return cookieValue;
          }

          function uploadFiles(files) {
            const formData = new FormData();
            for (const file of files) {
              formData.append('images', file);
            }

            fetch('/upload/', {
              method: 'POST',
              headers: {
                'X-CSRFToken': getCookie('csrftoken')
              },
              body: formData
            })
            .then(response => response.json())
            .then(data => {
              uploadStatus.textContent = 'Upload successful!';
            })
            .catch(error => {
              console.error('Upload error:', error);
              uploadStatus.textContent = 'Upload failed.';
            });
          }

          // Handle file input click
          dropArea.addEventListener('click', () => fileInput.click());
          fileInput.addEventListener('change', () => uploadFiles(fileInput.files));

          // Handle drag and drop
          dropArea.addEventListener('dragover', e => {
            e.preventDefault();
            dropArea.classList.add('highlight');
          });

          dropArea.addEventListener('dragleave', () => {
            dropArea.classList.remove('highlight');
          });

          dropArea.addEventListener('drop', e => {
            e.preventDefault();
            dropArea.classList.remove('highlight');
            uploadFiles(e.dataTransfer.files);
          });
        });
      </script>
  </body>
</html>

